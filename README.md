# xamarin-android build on archlinux (with docker)

## TL;DR

1. ensure you have docker installed and setup and at least 32G of free space in your home
2. $ ./run.sh
3. put your xamarin app in myapp/src, your xamarin android project directory must be named [YourProjectName].Droid
4. edit the APP variable in the build.sh script and replace MyApp with [YourProjectName]
5. $ ./do\_it.sh
6. done! your apk is in myapp/src/[YourProjectName].Droid/bin/Debug/

## Prerequisites

The solution presented here to install xamarin-android make use of docker

```
pacman -Syu docker
```

## Installing

From with the git root repository (where the Dockerfile file lies)
```
docker build -t xa-build .
```

or
```
docker build --build-arg USER_ID=$(id -u) -t xa-build .
```
The build arg allow you to have the builduser user id inside the docker container
to match your current user id outside the container which may be useful later:
If you want to bind mount your xamarin project inside a container to build it without
having the files generated by the build belong to another user

Then,

```
BUILD_HOME=/path/to/some/dir/with/lots/of/space
docker run -it --rm -v ${BUILD_HOME}:/home/builduser xa-build
```
The reason that the actual xamarin android build is not done during the docker image build phase
is to allow to bind mount a directory onto the /home/builduser directory because a high volume
of data will be downloaded here (was about 31GB for me) and in my case there was not enough space
on the disk where /var/lib/docker/volumes directory lies
